<launch>
	<arg name="wall_cam_name" default="wall_cam"/>
	<arg name="face_cam_name" default="face_cam"/>

	<include file="$(find projected_lightswitch_interface)/launch/prerequisites.launch">
		<arg name="wall_cam_name" value="wall_cam"/>
		<arg name="face_cam_name" value="face_cam"/>
	</include>

	<!-- Head pose estimation -->
	<include file="$(find head_pose_estimation)/launch/estimator.launch">
		<arg name="filter_pose" value="false"/>
		<arg name="camera" value="$(arg face_cam_name)"/>
	</include>

	<!-- Table/wall detection + Object segmentation -->
	<include file="$(find projector_interface)/launch/tabletop_segmentation_overhead_kinect.launch">
		<arg name="tabletop_segmentation_points_in" value="/$(arg wall_cam_name)/depth_registered/points"/>
	</include>
	<node pkg="projector_interface" name="find_objects" type="find_objects.py"/>

	<!-- Interface -->
	<include file="$(find projector_interface)/launch/calibrate_and_circle.launch">
	 	<arg name="calibration_camera" value="/$(arg wall_cam_name)/rgb"/>
	</include>
	
	<node name="rviz_click" pkg="projected_lightswitch_interface" type="click_to_if.py"/>
	
	<node name="intersect_plane" pkg="world_intersect" type="intersect_plane.py">
    	<remap from="pose" to="head_pose"/>
  	</node>

</launch>